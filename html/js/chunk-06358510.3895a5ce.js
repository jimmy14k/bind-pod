(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06358510"],{"12fb":function(e,t,a){"use strict";var s=a("4fdc"),o=a.n(s);o.a},"4fdc":function(e,t,a){},"58f1":function(e,t,a){"use strict";var s=a("702a"),o=a.n(s);o.a},"702a":function(e,t,a){},7130:function(e,t,a){"use strict";var s=a("b886"),o=a.n(s);o.a},b886:function(e,t,a){},e8932:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("BaseTemplate",{attrs:{"router-name":"操作日志","router-path":"/logs"},scopedSlots:e._u([{key:"main",fn:function(){return[a("div",{staticClass:"logMain"},[a("div",{staticClass:"search"},[a("div",{staticClass:"searchItem"},[a("span",[e._v("操作人")]),a("el-input",{attrs:{placeholder:"请输入用户名",size:"medium"},on:{input:e.search},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("div",{staticClass:"searchItem"},[a("span",[e._v("事件类型")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.eventChange},model:{value:e.eventType,callback:function(t){e.eventType=t},expression:"eventType"}},e._l(e.eventOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"searchItem"},[a("span",[e._v("操作时间")]),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd"},on:{change:e.filterTime},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),a("div",{staticClass:"tableMain"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"username",label:"操作人"}}),a("el-table-column",{attrs:{prop:"create_time",label:"时间"}}),a("el-table-column",{attrs:{prop:"event",label:"事件"}}),a("el-table-column",{attrs:{prop:"content",label:"操作内容",width:"600"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.logTotal,"page-size":e.pageSize,"current-page":e.page},on:{"current-change":e.loadData}})],1)],1)])]},proxy:!0}])})],1)},o=[],i=a("fddf"),n={name:"log",data:function(){return{value:[],page:1,logTotal:0,pageSize:10,username:"",eventType:"",tableData:[],start_time:"",end_time:"",eventOptions:[{value:"",label:"全部"},{value:0,label:"登陆"},{value:1,label:"域名"},{value:2,label:"解析"},{value:3,label:"用户"}]}},components:{BaseTemplate:i["a"]},methods:{filterTime:function(e){this.start_time=e[0],this.end_time=e[1],this.loadData(1)},eventChange:function(e){this.eventType=e,this.loadData(1)},search:function(e){this.username=e,this.loadData(1)},loadData:function(e){var t=this;this.page=e;var a="&username="+this.username+"&event="+this.eventType+"&start_time="+this.start_time+"&end_time="+this.end_time;this.axios.get("/agent/log/?size=10&page="+this.page+a,{headers:{Authorization:this.$cookie.get("Token")}}).then((function(e){t.tableData=e.data.data.data,t.logTotal=e.data.data.page_num.count}))}},mounted:function(){this.loadData(this.page)}},r=n,l=(a("58f1"),a("2877")),c=Object(l["a"])(r,s,o,!1,null,"a0046ba2",null);t["default"]=c.exports},fddf:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menu"}},[a("Header"),a("div",{staticClass:"content"},[a("el-container",[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-active":e.$route.path,router:""}},[a("el-menu-item",{attrs:{index:"/domain"}},[a("i",{staticClass:"el-icon-menu"}),e._v("域名列表")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.is_superuser,expression:"is_superuser"}],attrs:{index:"/add"}},[a("i",{staticClass:"el-icon-circle-plus"}),e._v("添加域名")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.is_superuser,expression:"is_superuser"}],attrs:{index:"/user"}},[a("i",{staticClass:"el-icon-user-solid"}),e._v("用户管理")]),a("el-menu-item",{attrs:{index:"/logs"}},[a("i",{staticClass:"el-icon-s-tools"}),e._v("操作日志")])],1)],1),a("el-container",[a("el-main",[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:e.routerPath}}},[e._v(e._s(e.routerName))]),e.currentRouterName?a("el-breadcrumb-item",[e._v(e._s(e.currentRouterName))]):e._e()],1)],1),e._t("main")],2)],1)],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"header"}},[a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible,width:"20%"},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.changeCancel}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"show-password":"",autocomplete:"off"},model:{value:e.form.Password,callback:function(t){e.$set(e.form,"Password",t)},expression:"form.Password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.changeSubmit}},[e._v("确 定")])],1)],1),a("el-header",[a("el-container",[a("div",{staticClass:"logo"},[e._v(" BindPod ")]),a("div",{staticClass:"userInfo"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.username)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"changePassword"}},[a("i",{staticClass:"el-icon-user"}),e._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"logout"}},[a("i",{staticClass:"el-icon-s-promotion"}),e._v("安全退出")])],1)],1)],1)])],1)],1)},n=[],r={name:"Header",computed:{username:function(){return this.$cookie.get("username","")}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"60px",form:{Password:""}}},methods:{changeSubmit:function(){var e=this,t=this.$cookie.get("user"),a=this.form.Password;this.axios.post("/agent/user/change/",{password:a,username:t},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(t){var a="success";200!==t.data.code&&(a="error"),e.$message({message:t.data.msg,type:a}),e.dialogFormVisible=!1,e.$cookie.delete("Token"),e.$cookie.delete("username"),e.$cookie.delete("user"),e.$cookie.delete("is_superuser"),e.$router.push("/login")}))},changeCancel:function(){this.form={Password:""}},handleCommand:function(e){var t=this;"logout"===e?this.$confirm("确定退出当前账号？","退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var e=t.$cookie.get("user");t.axios.post("/logout/",{username:e},{headers:{Authorization:t.$cookie.get("Token")}}),t.$cookie.delete("Token"),t.$cookie.delete("username"),t.$cookie.delete("user"),t.$cookie.delete("is_superuser"),t.$router.push("/login")})):this.dialogFormVisible=!0}}},l=r,c=(a("7130"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,"2adc581f",null),d=u.exports,m={name:"BaseTemplate",data:function(){return{is_superuser:this.$cookie.get("is_superuser")}},props:{routerPath:String,routerName:String,currentRouterName:String},components:{Header:d}},p=m,h=(a("12fb"),Object(c["a"])(p,s,o,!1,null,"1da2126e",null));t["a"]=h.exports}}]);
//# sourceMappingURL=chunk-06358510.3895a5ce.js.map