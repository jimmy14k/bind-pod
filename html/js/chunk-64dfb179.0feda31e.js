(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64dfb179"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"12fb":function(e,t,a){"use strict";var o=a("4fdc"),i=a.n(o);i.a},"14c3":function(e,t,a){var o=a("c6b6"),i=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var n=a.call(e,t);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==o(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"25f0":function(e,t,a){"use strict";var o=a("6eeb"),i=a("825a"),n=a("d039"),s=a("ad6d"),r="toString",l=RegExp.prototype,c=l[r],u=n((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=r;(u||d)&&o(RegExp.prototype,r,(function(){var e=i(this),t=String(e.source),a=e.flags,o=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?s.call(e):a);return"/"+t+"/"+o}),{unsafe:!0})},"3c2a":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"analysis"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"20%",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.closeDialog}},[a("el-form",{staticClass:"dialogForm",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写内容",size:"medium",autocomplete:"off"},on:{blur:e.checkInputValue},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"记录类型","label-width":e.formLabelWidth}},[2===e.is_op_type?a("el-input",{attrs:{size:"medium",disabled:!0,autocomplete:"off"},on:{blur:e.checkInputValue},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}}):a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium",placeholder:"请选择记录类型",autocomplete:"off"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"NS",value:"TEXT"}}),a("el-option",{attrs:{label:"A",value:"A"}}),a("el-option",{attrs:{label:"AAAA",value:"AAAA"}}),a("el-option",{attrs:{label:"CNAME",value:"CNAME"}}),a("el-option",{attrs:{label:"MX",value:"MX"}})],1)],1),a("el-form-item",{attrs:{label:"MX","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写内容",size:"medium",autocomplete:"off"},on:{blur:e.checkInputValue},model:{value:e.form.mx,callback:function(t){e.$set(e.form,"mx",t)},expression:"form.mx"}})],1),a("el-form-item",{attrs:{label:"TTL","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写内容",size:"medium",autocomplete:"off"},on:{blur:e.checkInputValue},model:{value:e.form.ttl,callback:function(t){e.$set(e.form,"ttl",t)},expression:"form.ttl"}})],1),a("el-form-item",{attrs:{label:"地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请填写内容",size:"medium",autocomplete:"off"},on:{blur:e.checkInputValue},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),a("BaseTemplate",{attrs:{"router-name":"域名列表","router-path":"/","current-router-name":"解析列表"},scopedSlots:e._u([{key:"main",fn:function(){return[a("div",{staticClass:"analysisContent"},[a("div",{staticClass:"indexTable"},[a("div",{staticClass:"search"},[a("div",{staticClass:"input"},[a("div",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.addAnalysisEvent}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加解析 ")])],1),a("div",[a("el-input",{attrs:{size:"medium","suffix-icon":"el-icon-search",placeholder:"请输入解析名称"},on:{input:e.searchAnalysis},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)])]),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"记录类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{label:"MX"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.mx))])]}}])}),a("el-table-column",{attrs:{label:"TTL"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.ttl))])]}}])}),a("el-table-column",{attrs:{label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.address))])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"inactive-color":"#ff4949"},on:{change:function(a){return e.analysisStatus(a,t.row)}},model:{value:t.row.is_active,callback:function(a){e.$set(t.row,"is_active",a)},expression:"scope.row.is_active"}})]}}])}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.create_time))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editAnalysis(t.$index,t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.analysisTotal,"current-page":e.page},on:{"current-change":e.loadData}})],1)])])]},proxy:!0}])})],1)},i=[],n=(a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("841c"),a("498a"),a("fddf")),s={name:"analysis",components:{BaseTemplate:n["a"]},data:function(){return{page:1,analysisTotal:0,dialogVisible:!1,domain:this.$route.query.domain,dialogFormVisible:!1,dialogTitle:"",formLabelWidth:"70px",is_op_type:0,form:{name:"",type:"",mx:0,ttl:600,address:""},search:"",tableData:[]}},methods:{analysisStatus:function(e,t){var a=this;this.axios.post("/agent/resolve/stop/",{domain:this.domain,resolve_id:t.id,is_active:e},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(e){var t="success";200!==e.data.code&&(t="error"),a.$message({message:e.data.msg,type:t}),a.loadData(1)}))},handleDelete:function(e){var t=this;this.axios.post("/agent/resolve/delete/",{domain:this.domain,resolve_id:e.id},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(e){var a="success";200!==e.data.code&&(a="error"),t.$message({message:e.data.msg,type:a}),t.loadData(1)}))},checkInputValue:function(e){0===e.target.value.trim().length&&(e.target.placeholder="请填写内容")},closeDialog:function(){this.form={name:"",type:"",mx:0,ttl:600,address:""}},submit:function(){var e=this;for(var t in this.form)if(0===this.form[t].toString().trim().length)return void this.$message({message:"表单没有填写完成!",type:"error"});1===this.is_op_type?this.axios.post("/agent/resolve/create/",{domain:this.domain,name:this.form.name,mx:parseInt(this.form.mx),ttl:parseInt(this.form.ttl),address:this.form.address,type:this.form.type},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(t){var a="success";200!==t.data.code&&(a="error"),e.$message({message:t.data.msg,type:a})})):2===this.is_op_type?this.axios.post("/agent/resolve/modify/",{resolve_id:this.form.id,domain:this.domain,mx:parseInt(this.form.mx),ttl:parseInt(this.form.ttl),address:this.form.address},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(t){var a="success";200!==t.data.code&&(a="error"),e.$message({message:t.data.msg,type:a})})):this.$message({message:"没有做任何操作",type:"info"}),this.dialogFormVisible=!1,this.is_op_type=0,this.dialogTitle="",this.loadData(1)},searchAnalysis:function(){this.loadData(1)},editAnalysis:function(e,t){this.form={id:t.id,name:t.name.toString(),type:t.type.toString(),mx:t.mx.toString(),ttl:t.ttl.toString(),address:t.address.toString()},this.dialogFormVisible=!0,this.is_op_type=2,this.dialogTitle="修改记录"},addAnalysisEvent:function(){this.dialogFormVisible=!0,this.is_op_type=1,this.dialogTitle="添加记录"},loadData:function(e){var t=this;this.page=e,this.axios.get("/agent/resolve/list/"+this.domain+"/?size=10&page="+this.page+"&name="+this.search,{headers:{Authorization:this.$cookie.get("Token")}}).then((function(e){t.tableData=e.data.data.data,t.analysisTotal=e.data.data.page_num.count}))}},mounted:function(){this.loadData(this.page)}},r=s,l=(a("6754"),a("2877")),c=Object(l["a"])(r,o,i,!1,null,"7b8850cc",null);t["default"]=c.exports},"498a":function(e,t,a){"use strict";var o=a("23e7"),i=a("58a8").trim,n=a("c8d2");o({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"4fdc":function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var o=a("1d80"),i=a("5899"),n="["+i+"]",s=RegExp("^"+n+n+"*"),r=RegExp(n+n+"*$"),l=function(e){return function(t){var a=String(o(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(r,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},6754:function(e,t,a){"use strict";var o=a("6e57"),i=a.n(o);i.a},"6e57":function(e,t,a){},7130:function(e,t,a){"use strict";var o=a("b886"),i=a.n(o);i.a},"841c":function(e,t,a){"use strict";var o=a("d784"),i=a("825a"),n=a("1d80"),s=a("129f"),r=a("14c3");o("search",1,(function(e,t,a){return[function(t){var a=n(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,a):new RegExp(t)[e](String(a))},function(e){var o=a(t,e,this);if(o.done)return o.value;var n=i(e),l=String(this),c=n.lastIndex;s(c,0)||(n.lastIndex=0);var u=r(n,l);return s(n.lastIndex,c)||(n.lastIndex=c),null===u?-1:u.index}]}))},9263:function(e,t,a){"use strict";var o=a("ad6d"),i=a("9f7f"),n=RegExp.prototype.exec,s=String.prototype.replace,r=n,l=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(r=function(e){var t,a,i,r,d=this,m=c&&d.sticky,f=o.call(d),p=d.source,h=0,g=e;return m&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,h++),a=new RegExp("^(?:"+p+")",f)),u&&(a=new RegExp("^"+p+"$(?!\\s)",f)),l&&(t=d.lastIndex),i=n.call(m?a:d,g),m?i?(i.input=i.input.slice(h),i[0]=i[0].slice(h),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:l&&i&&(d.lastIndex=d.global?i.index+i[0].length:t),u&&i&&i.length>1&&s.call(i[0],a,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=r},"9f7f":function(e,t,a){"use strict";var o=a("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=o((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=o((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,a){"use strict";var o=a("23e7"),i=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,a){"use strict";var o=a("825a");e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,a){var o=a("83ab"),i=a("9bf2").f,n=Function.prototype,s=n.toString,r=/^\s*function ([^ (]*)/,l="name";o&&!(l in n)&&i(n,l,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(e){return""}}})},b886:function(e,t,a){},c8d2:function(e,t,a){var o=a("d039"),i=a("5899"),n="​᠎";e.exports=function(e){return o((function(){return!!i[e]()||n[e]()!=n||i[e].name!==e}))}},d784:function(e,t,a){"use strict";a("ac1f");var o=a("6eeb"),i=a("d039"),n=a("b622"),s=a("9263"),r=a("9112"),l=n("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=n("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,d){var p=n(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=h&&!i((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return t=!0,null},a[p](""),!t}));if(!h||!g||"replace"===e&&(!c||!u||m)||"split"===e&&!f){var v=/./[p],b=a(p,""[e],(function(e,t,a,o,i){return t.exec===s?h&&!i?{done:!0,value:v.call(t,a,o)}:{done:!0,value:e.call(a,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),x=b[0],y=b[1];o(String.prototype,e,x),o(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}d&&r(RegExp.prototype[p],"sham",!0)}},fddf:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menu"}},[a("Header"),a("div",{staticClass:"content"},[a("el-container",[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-active":e.$route.path,router:""}},[a("el-menu-item",{attrs:{index:"/domain"}},[a("i",{staticClass:"el-icon-menu"}),e._v("域名列表")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.is_superuser,expression:"is_superuser"}],attrs:{index:"/add"}},[a("i",{staticClass:"el-icon-circle-plus"}),e._v("添加域名")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.is_superuser,expression:"is_superuser"}],attrs:{index:"/user"}},[a("i",{staticClass:"el-icon-user-solid"}),e._v("用户管理")]),a("el-menu-item",{attrs:{index:"/logs"}},[a("i",{staticClass:"el-icon-s-tools"}),e._v("操作日志")])],1)],1),a("el-container",[a("el-main",[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:e.routerPath}}},[e._v(e._s(e.routerName))]),e.currentRouterName?a("el-breadcrumb-item",[e._v(e._s(e.currentRouterName))]):e._e()],1)],1),e._t("main")],2)],1)],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"header"}},[a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible,width:"20%"},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.changeCancel}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"show-password":"",autocomplete:"off"},model:{value:e.form.Password,callback:function(t){e.$set(e.form,"Password",t)},expression:"form.Password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.changeSubmit}},[e._v("确 定")])],1)],1),a("el-header",[a("el-container",[a("div",{staticClass:"logo"},[e._v(" BindPod ")]),a("div",{staticClass:"userInfo"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.username)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"changePassword"}},[a("i",{staticClass:"el-icon-user"}),e._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"logout"}},[a("i",{staticClass:"el-icon-s-promotion"}),e._v("安全退出")])],1)],1)],1)])],1)],1)},s=[],r={name:"Header",computed:{username:function(){return this.$cookie.get("username","")}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"60px",form:{Password:""}}},methods:{changeSubmit:function(){var e=this,t=this.$cookie.get("user"),a=this.form.Password;this.axios.post("/agent/user/change/",{password:a,username:t},{headers:{Authorization:this.$cookie.get("Token")}}).then((function(t){var a="success";200!==t.data.code&&(a="error"),e.$message({message:t.data.msg,type:a}),e.dialogFormVisible=!1,e.$cookie.delete("Token"),e.$cookie.delete("username"),e.$cookie.delete("user"),e.$cookie.delete("is_superuser"),e.$router.push("/login")}))},changeCancel:function(){this.form={Password:""}},handleCommand:function(e){var t=this;"logout"===e?this.$confirm("确定退出当前账号？","退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var e=t.$cookie.get("user");t.axios.post("/logout/",{username:e},{headers:{Authorization:t.$cookie.get("Token")}}),t.$cookie.delete("Token"),t.$cookie.delete("username"),t.$cookie.delete("user"),t.$cookie.delete("is_superuser"),t.$router.push("/login")})):this.dialogFormVisible=!0}}},l=r,c=(a("7130"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"2adc581f",null),d=u.exports,m={name:"BaseTemplate",data:function(){return{is_superuser:this.$cookie.get("is_superuser")}},props:{routerPath:String,routerName:String,currentRouterName:String},components:{Header:d}},f=m,p=(a("12fb"),Object(c["a"])(f,o,i,!1,null,"1da2126e",null));t["a"]=p.exports}}]);
//# sourceMappingURL=chunk-64dfb179.0feda31e.js.map